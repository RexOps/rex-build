# basic informations
name:
  centos: rex
  debian: rex
  ubuntu: rex
  fedora: rex
  redhat: rex
  suse: rex
  mageia: rex
realname: Rex
version: 0.43.7
release: 1
epoch: 1
summary: Rex is a tool to ease the execution of commands on multiple remote servers.
group:
  centos: Utilities/System
  debian: admin
  ubuntu: admin
  redhat: admin
  fedora: admin
  suse: admin
  mageia: admin
license: Apache 2
homepage: http://rexify.org/
source: http://nightly.rex.linux-files.org/source/Rex-0.43.99.10.tar.gz
maintainer: jan gehring <jan.gehring@gmail.com>
priority: optional
no_auto_scan: true
description: |
  Rex is a tool to ease the execution of commands on multiple remote
  servers. You can define small tasks, chain tasks to batches, link
  them with servers or server groups, and execute them easily in
  your terminal.

# requirements
requires:
  debian:
    squeeze: &depsqueeze
      build:
        - build-essential
        - debhelper
        - perl
        - libperl-dev
        - perl-modules
        - make
        - libnet-ssh2-perl
        - libexpect-perl
        - libdbi-perl
        - libwww-perl
        - libxml-simple-perl
        - libdigest-hmac-perl
        - libyaml-perl
        - libstring-escape-perl
        - libjson-xs-perl
        - liblist-moreutils-perl
        - libterm-readkey-perl
        - libxml-libxml-perl
        - libparallel-forkmanager-perl
        - libipc-shareable-perl
        - libtext-glob-perl
      runtime:
        - perl
        - perl-modules
        - libnet-ssh2-perl
        - libexpect-perl
        - libdbi-perl
        - libwww-perl
        - libxml-simple-perl
        - libdigest-hmac-perl
        - libyaml-perl
        - libstring-escape-perl
        - libjson-xs-perl
        - liblist-moreutils-perl
        - libterm-readkey-perl
        - libxml-libxml-perl
        - libparallel-forkmanager-perl
        - libipc-shareable-perl
        - libtext-glob-perl


    wheezy: &depwheezy
      build:
        - build-essential
        - debhelper
        - perl
        - libperl-dev
        - perl-modules
        - make
        - libnet-ssh2-perl
        - libexpect-perl
        - libdbi-perl
        - libwww-perl
        - liblwp-protocol-https-perl
        - libxml-simple-perl
        - libdigest-hmac-perl
        - libyaml-perl
        - libstring-escape-perl
        - libjson-xs-perl
        - liblist-moreutils-perl
        - libterm-readkey-perl
        - libxml-libxml-perl
        - libparallel-forkmanager-perl
        - libipc-shareable-perl
        - libtext-glob-perl

      runtime:
        - perl
        - perl-modules
        - libnet-ssh2-perl
        - libexpect-perl
        - libdbi-perl
        - libwww-perl
        - liblwp-protocol-https-perl
        - libxml-simple-perl
        - libdigest-hmac-perl
        - libyaml-perl
        - libstring-escape-perl
        - libjson-xs-perl
        - liblist-moreutils-perl
        - libterm-readkey-perl
        - libxml-libxml-perl
        - libparallel-forkmanager-perl
        - libipc-shareable-perl
        - libtext-glob-perl


  centos:
    5:
      build:
        - make
        - perl
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl(Term::ReadKey): perl-TermReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob
      runtime:
        - perl
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl(Term::ReadKey): perl-TermReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob

    6: &depcentos6
      build:
        - make
        - perl
        - perl-devel
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl-Time-HiRes
        - perl(Term::ReadKey): perl-TermReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob


      runtime:
        - perl
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl-Time-HiRes
        - perl(Term::ReadKey): perl-TermReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob

    7:
      build:
        - make
        - perl
        - perl-devel
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl-Time-HiRes
        - perl(Term::ReadKey): perl-TermReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob


      runtime:
        - perl
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl-Time-HiRes
        - perl(Term::ReadKey): perl-TermReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob



  ubuntu:
    lucid: *depsqueeze
    precise: *depwheezy
    quantal: *depwheezy
    raring: *depwheezy
    saucy: *depwheezy
    trusty: *depwheezy

  fedora:
    18: &depfedora18
      build:
        - make
        - perl
        - perl-devel
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-ExtUtils-MakeMaker
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl(Term::ReadKey): perl-TermReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob


      runtime:
        - perl
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl(Term::ReadKey): perl-TermReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob


    19: *depfedora18
    20: *depfedora18

  redhat:
    18: *depfedora18
    19: *depfedora18
    20: *depfedora18

  suse:
    13.1: &depsuse13
      build:
        - make
        - perl
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl(Term::ReadKey): perl-TermReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob

      runtime:
        - perl
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl(Term::ReadKey): perl-TermReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob

    13.2: *depsuse13

  mageia:
    3:
      build:
        - make
        - perl
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl-Term-ReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob

      runtime:
        - perl
        - perl-Net-SSH2
        - perl-Expect
        - perl-DBI
        - perl-libwww-perl
        - perl-XML-Simple
        - perl-Digest-HMAC
        - perl-YAML
        - perl-String-Escape
        - perl-JSON-XS
        - perl-List-MoreUtils
        - perl-Term-ReadKey
        - perl-XML-LibXML
        - perl(Parallel::ForkManager): perl-Parallel-ForkManager
        - perl(IPC::Shareable): perl-IPC-Shareable
        - perl(Text::Glob): perl-Text-Glob

# build instructions
configure: |
  tar xzf <%= $sourceroot %>/<%= $realname %>-<%= $version %>.tar.gz
  cd <%= $realname %>-<%= $version %>

  perl Makefile.PL INSTALLDIRS="vendor" PREFIX=<%= $buildroot %>/usr

make: |
  cd <%= $realname %>-<%= $version %>
  make

install: |
  rm -rf <%= $buildroot %>

  cd <%= $realname %>-<%= $version %>
  make pure_install
  find <%= $buildroot %> -name .packlist -exec /bin/rm '{}' ';'

clean: |
  rm -rf <%= $buildroot %>

files:
  package:
    - /usr
  fedora:
    doc:
      - %{_mandir}/*
    package:
      - %{_bindir}/*
      - %{perl_vendorlib}/*
  centos:
    doc:
      - %{_mandir}/*
    package:
      - %{_bindir}/*
      - %{perl_vendorlib}/*
